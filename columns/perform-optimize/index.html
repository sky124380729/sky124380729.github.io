<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能优化 | LEVI NOTEBOOK</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.0.0-rc.41">
    <link rel="preload stylesheet" href="/assets/style.yEKvNJoG.css" as="style">
    
    <script type="module" src="/assets/app.s5P_kLLA.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.OaYh-_yc.js">
    <link rel="modulepreload" href="/assets/chunks/theme.05Rcyb9s.js">
    <link rel="modulepreload" href="/assets/columns_perform-optimize_index.md.mzWhw-Gp.lean.js">
    <link rel="shortcut icon" href="/favicon.ico">
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?bb6ad308cbbeaa342099abc91a8ee9cb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-4a01b9a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-4a7bb438></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-4a7bb438> Skip to content </a><!--]--><!----><header class="VPNav" data-v-4a01b9a9 data-v-e2a7b0e4><div class="VPNavBar" data-v-e2a7b0e4 data-v-92055893><div class="wrapper" data-v-92055893><div class="container" data-v-92055893><div class="title" data-v-92055893><div class="VPNavBarTitle" data-v-92055893 data-v-b7dbcc20><a class="title" href="/" data-v-b7dbcc20><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-4a77fdaa><!--]--><span data-v-b7dbcc20>LEVI NOTEBOOK</span><!--[--><!--]--></a></div></div><div class="content" data-v-92055893><div class="content-body" data-v-92055893><!--[--><!--]--><div class="VPNavBarSearch search" data-v-92055893><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-92055893 data-v-6ba93fad><span id="main-nav-aria-label" class="visually-hidden" data-v-6ba93fad>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6ba93fad data-v-96f45932><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96f45932><span class="text" data-v-96f45932><!----><span data-v-96f45932>Language</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96f45932><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96f45932><div class="VPMenu" data-v-96f45932 data-v-ad8f30ca><div class="items" data-v-ad8f30ca><!--[--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/language/javascript.html" data-v-4b1070e2><!--[-->Javascript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/language/typescript.html" data-v-4b1070e2><!--[-->Typescript<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6ba93fad data-v-96f45932><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96f45932><span class="text" data-v-96f45932><!----><span data-v-96f45932>Framework</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96f45932><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96f45932><div class="VPMenu" data-v-96f45932 data-v-ad8f30ca><div class="items" data-v-ad8f30ca><!--[--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/framework/vue/knowledge.html" data-v-4b1070e2><!--[-->Vue<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/framework/react/knowledge.html" data-v-4b1070e2><!--[-->React<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/framework/miniprogram/knowledge.html" data-v-4b1070e2><!--[-->Miniprogram<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/framework/micro-frontend/knowledge.html" data-v-4b1070e2><!--[-->Micro-Frontend<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6ba93fad data-v-96f45932><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96f45932><span class="text" data-v-96f45932><!----><span data-v-96f45932>Bundle</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96f45932><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96f45932><div class="VPMenu" data-v-96f45932 data-v-ad8f30ca><div class="items" data-v-ad8f30ca><!--[--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/bundle/webpack.html" data-v-4b1070e2><!--[-->Webpack<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/bundle/vite.html" data-v-4b1070e2><!--[-->Vite<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/bundle/rollup.html" data-v-4b1070e2><!--[-->Rollup<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/bundle/esbuild.html" data-v-4b1070e2><!--[-->Esbuild<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/algorithm/index.html" tabindex="0" data-v-6ba93fad data-v-ad6a2210><!--[--><span data-v-ad6a2210>Algorithm</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6ba93fad data-v-96f45932><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96f45932><span class="text" data-v-96f45932><!----><span data-v-96f45932>Mini Code</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96f45932><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96f45932><div class="VPMenu" data-v-96f45932 data-v-ad8f30ca><div class="items" data-v-ad8f30ca><!--[--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/mini-code/vue2.html" data-v-4b1070e2><!--[-->Vue2<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/mini-code/vue3.html" data-v-4b1070e2><!--[-->Vue3<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/mini-code/vue-next-mini/reactivity.html" data-v-4b1070e2><!--[-->vue-next-mini<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/mini-code/vue-router.html" data-v-4b1070e2><!--[-->Vue-Router<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/mini-code/promise.html" data-v-4b1070e2><!--[-->Promise<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/mini-code/micro-frontend.html" data-v-4b1070e2><!--[-->Micro-Frontend<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6ba93fad data-v-96f45932><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96f45932><span class="text" data-v-96f45932><!----><span data-v-96f45932>Advanced</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96f45932><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96f45932><div class="VPMenu" data-v-96f45932 data-v-ad8f30ca><div class="items" data-v-ad8f30ca><!--[--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/advanced/framework.html" data-v-4b1070e2><!--[-->Framework<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/advanced/cli/index.html" data-v-4b1070e2><!--[-->CLI<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/advanced/design-patterns.html" data-v-4b1070e2><!--[-->Design Patterns<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/advanced/reg-exp.html" data-v-4b1070e2><!--[-->Reg-Exp<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6ba93fad data-v-96f45932><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96f45932><span class="text" data-v-96f45932><!----><span data-v-96f45932>Links</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96f45932><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96f45932><div class="VPMenu" data-v-96f45932 data-v-ad8f30ca><div class="items" data-v-ad8f30ca><!--[--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/links/projects.html" data-v-4b1070e2><!--[-->Projects<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/links/plugins.html" data-v-4b1070e2><!--[-->Plugins<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/links/websites.html" data-v-4b1070e2><!--[-->Websites<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ad8f30ca data-v-4b1070e2><a class="VPLink link" href="/links/blogs.html" data-v-4b1070e2><!--[-->Blogs<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/interview/index.html" tabindex="0" data-v-6ba93fad data-v-ad6a2210><!--[--><span data-v-ad6a2210>Interview </span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/qa/index.html" tabindex="0" data-v-6ba93fad data-v-ad6a2210><!--[--><span data-v-ad6a2210>Q&A</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-92055893 data-v-f0c48702><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f0c48702 data-v-75b7f3b0 data-v-0948b7e1><span class="check" data-v-0948b7e1><span class="icon" data-v-0948b7e1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-75b7f3b0><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-75b7f3b0><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-92055893 data-v-73de9fcb data-v-9701c24b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/sky124380729/sky124380729.github.io" aria-label="github" target="_blank" rel="noopener" data-v-9701c24b data-v-a07fcbc0><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-92055893 data-v-a8356461 data-v-96f45932><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-96f45932><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-96f45932><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-96f45932><div class="VPMenu" data-v-96f45932 data-v-ad8f30ca><!----><!--[--><!--[--><!----><div class="group" data-v-a8356461><div class="item appearance" data-v-a8356461><p class="label" data-v-a8356461>Appearance</p><div class="appearance-action" data-v-a8356461><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-a8356461 data-v-75b7f3b0 data-v-0948b7e1><span class="check" data-v-0948b7e1><span class="icon" data-v-0948b7e1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-75b7f3b0><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-75b7f3b0><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-a8356461><div class="item social-links" data-v-a8356461><div class="VPSocialLinks social-links-list" data-v-a8356461 data-v-9701c24b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/sky124380729/sky124380729.github.io" aria-label="github" target="_blank" rel="noopener" data-v-9701c24b data-v-a07fcbc0><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-92055893 data-v-7ee0155f><span class="container" data-v-7ee0155f><span class="top" data-v-7ee0155f></span><span class="middle" data-v-7ee0155f></span><span class="bottom" data-v-7ee0155f></span></span></button></div></div></div></div><div class="divider" data-v-92055893><div class="divider-line" data-v-92055893></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-4a01b9a9 data-v-93472134><div class="container" data-v-93472134><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-93472134 data-v-8464e44c><button data-v-8464e44c>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-4a01b9a9 data-v-ff818074><div class="VPDoc has-aside" data-v-ff818074 data-v-8c9e7a14><!--[--><!--]--><div class="container" data-v-8c9e7a14><div class="aside" data-v-8c9e7a14><div class="aside-curtain" data-v-8c9e7a14></div><div class="aside-container" data-v-8c9e7a14><div class="aside-content" data-v-8c9e7a14><div class="VPDocAside" data-v-8c9e7a14 data-v-3e81f6fe><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3e81f6fe data-v-0797ec92><div class="content" data-v-0797ec92><div class="outline-marker" data-v-0797ec92></div><div class="outline-title" role="heading" aria-level="2" data-v-0797ec92>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-0797ec92><span class="visually-hidden" id="doc-outline-aria-label" data-v-0797ec92> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-0797ec92 data-v-2464d786><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3e81f6fe></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-8c9e7a14><div class="content-container" data-v-8c9e7a14><!--[--><!--]--><main class="main" data-v-8c9e7a14><div style="position:relative;" class="vp-doc _columns_perform-optimize_" data-v-8c9e7a14><div><h1 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h1><p><img src="/assets/perf_map.B1slcw6m.png" alt="image" data-zoomable=""></p><h2 id="请求和相应优化" tabindex="-1">请求和相应优化 <a class="header-anchor" href="#请求和相应优化" aria-label="Permalink to &quot;请求和相应优化&quot;">​</a></h2><ul><li>减少DNS查找</li><li>重用TCP链接</li><li>减少HTTP重定向</li><li>压缩传输的资源</li><li>使用缓存</li><li>使用CDN</li><li>删除没有必要的请求资源</li><li>在客户端缓存资源</li><li>内容在传输前先压缩</li><li>消除没有必要的请求开销</li><li>并行处理请求和响应</li><li>针对协议版本采取优化措施:升级到HTTP2.0</li><li>根据需要采用服务端渲染方式:结算SPA应用首屏渲染慢的问题</li><li>采用预渲染的方式快速加载静态页面:页面渲染的极致性能，比较适合静态页面</li></ul><blockquote><p>使用不同域名可以提供浏览器请求资源并发的效率， 但是多个域名又会造成DNS查找时间上的累加，因此一般将资源划分到至少两个但不超过四个域名</p></blockquote><h3 id="dns预解析" tabindex="-1">dns预解析 <a class="header-anchor" href="#dns预解析" aria-label="Permalink to &quot;dns预解析&quot;">​</a></h3><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dns-prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://g.alicdn.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dns-prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://img.alicdn.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li>dns预解析仅对<strong>跨域</strong>域上的DNS查找有效，因此要避免指向当前站点或者域</li><li>dns-prefetch<strong>需慎用</strong>，多页面重复DNS预解析会增加重复DNS查询次数</li><li>默认情况下高版本浏览器已经支持隐式的DNS预解析，不需要使用dns-prefetch，如果为了兼容低版本浏览器，或者想对页面没有出现的域进行预获取，就要使用dns prefetch</li><li>虽然dns prefetch能够加快解析速度，但是不能滥用，禁用DNS预解析能够节约每月100亿的DNS查询</li></ol><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x-dns-prefetch-control&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;off&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="http长连接" tabindex="-1">http长连接 <a class="header-anchor" href="#http长连接" aria-label="Permalink to &quot;http长连接&quot;">​</a></h3><p>对于同一个域名，大多数浏览器允许同时建立6个持久连接</p><h3 id="请求体压缩" tabindex="-1">请求体压缩 <a class="header-anchor" href="#请求体压缩" aria-label="Permalink to &quot;请求体压缩&quot;">​</a></h3><p>http1x也支持请求体压缩，需要客户端和服务端商量好压缩和解压算法</p><p>常见三种压缩格式,一般只压缩文本，因为压缩本身也是很耗时的操作，不适合图片和视频等</p><ol><li>DEFLATE</li><li>ZLIB:对应HTTP中的Content-Encoding:deflate</li><li>GZIP:对应HTTP中的Content-Encoding:gzip</li></ol><h3 id="http缓存" tabindex="-1">http缓存 <a class="header-anchor" href="#http缓存" aria-label="Permalink to &quot;http缓存&quot;">​</a></h3><h4 id="强制缓存" tabindex="-1">强制缓存 <a class="header-anchor" href="#强制缓存" aria-label="Permalink to &quot;强制缓存&quot;">​</a></h4><blockquote><p>客户端请求服务器，服务器告诉客户端可以强制缓存，客户端下次再请求该资源的时候，如果没有过期，直接使用该缓存，不需要再询问服务器</p></blockquote><ul><li>Expires(不常用，可以直接用Cache-Control，一般只会在需要向下兼容时候使用)</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Expires: new Date(&#39;2022-02-12 23:10&#39;).toUTCString() //这里是绝对时间</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这样做有个局限性，如果客户端和服务器的时间不一致，就会产生很大的问题</p><p>为了解决expires的局限性，HTTP1.1新增<code>cache-control</code>字段对<code>expires</code>的功能进行扩展和完善</p><ul><li>Cache-Control</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Cache-Control: max-age=5  //这里的单位是s,这里也就是5秒之内强制缓存</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Cache-Control:</p><ul><li><code>no-store</code> 表示禁止使用任何缓存策略</li><li><code>no-cache</code> 表示强制进行协商缓存</li><li><code>no-store</code> 和 <code>no-cache</code> 是互斥属性，不能同时设置</li><li><code>private</code> 不可被代理服务器缓存(例如nginx)，可以被浏览器缓存，是默认值</li><li><code>public</code> 既可以被代理服务器缓存(例如nginx)，又可以被浏览器缓存</li><li><code>private</code> 和 <code>public</code> 为互斥属性，不能同时设置</li><li><code>s-maxage</code> 在 <code>public</code>下有效，设置代理缓存的时长</li></ul><p>一般对于不怎么会改变的文件，比如图片，CSS，js文件，设置public</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Cache-Control:public,max-age:31536000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="协商缓存" tabindex="-1">协商缓存 <a class="header-anchor" href="#协商缓存" aria-label="Permalink to &quot;协商缓存&quot;">​</a></h4><blockquote><p>客户端每次发起请求都不会去判断强制缓存是否过期，而是直接与服务器协商来验证缓存的有效性，若缓存未过期，则使用本地缓存。</p></blockquote><ul><li>last-modified</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Cache-Control: no-cache</span></span>
<span class="line"><span>last-modified: new Date(&#39;2022-02-12 23:10&#39;).toUTCString() //  绝对时间，一般取文件的修改时间</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>服务端(Node.js)示例</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">mtime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">statSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./img/03.jpg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ifModifiedSince</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;if-modified-since&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ifModifiedSince </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toUTCString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 缓存生效</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  res.statusCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./img/03.jpg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;last-modified&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toUTCString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Cache-Control&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;no-cache&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>last-modified这种做法有两个问题:</p><ol><li>是根据资源最后修改时间戳判断的，虽然对请求的资源做了编辑，但内容没有变化，时间戳也会更新，会导致验证失效</li><li>判断的时间戳单位为秒，如果文件修改速度非常快，也无法识别有效性</li></ol><ul><li>ETag(相当于计算文件的指纹)</li></ul><p>服务端(Node.js)示例</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./img/04.jpg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> etagContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> etag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ifNoneMatch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;if-none-match&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ifNoneMatch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> etagContent) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  res.statusCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 304</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;etag&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, etagContent)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Cache-Control&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;no-cache&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ETag也有不足，它是last-modified的补充方案，不是替代方案：</p><ol><li>计算ETag需要额外的计算开销，文件越大开销越大</li><li>ETag分为强验证和弱验证，强验证就是根据资源内容来验证，保证每个字节都相同，若验证根据资源部分属性生成，生成速度快但是无法确保每个字节都相同，并且在服务器集群场景下，因为不够准确而降低协商缓存的有效性。</li></ol><h4 id="缓存决策" tabindex="-1">缓存决策 <a class="header-anchor" href="#缓存决策" aria-label="Permalink to &quot;缓存决策&quot;">​</a></h4><ul><li>一般index.html设置协商缓存，Etag或者last-modified都可以</li><li>不经常变动的，例如图片这种设置为强制缓存，时间不宜过长一般max-age=86400</li><li>style.css 这种打包出来会变成类似style.51ad833f5.css，这种文件变化一定会重新请求，所以可以直接设置强制缓存，同时考虑网络浏览器和中间代理的缓存，可以适当延长到一年，即cache-control: max-age=31536000</li><li>js类似于css，如果涉及安全问题，不想把用户私人信息缓存到代理中，可以设置cache-control:private</li></ul><h3 id="cdn缓存" tabindex="-1">CDN缓存 <a class="header-anchor" href="#cdn缓存" aria-label="Permalink to &quot;CDN缓存&quot;">​</a></h3><p>主站域名为<code>www.taobao.com</code>,静态资源的CDN服务器域名有<code>g.alicdn.com</code>和<code>img.alicdn</code>等，他们是有意被设置成和主站域名不同的，主要有两点原因:</p><ol><li>由于同域名下每次请求都会携带Cookie信息，这样做可以避免对静态资源的请求携带不必要的Cookie信息</li><li>考虑浏览器对同一域名下的并发请求限制(Chrome为6个)</li></ol><h2 id="渲染优化" tabindex="-1">渲染优化 <a class="header-anchor" href="#渲染优化" aria-label="Permalink to &quot;渲染优化&quot;">​</a></h2><h3 id="关键渲染路径优化" tabindex="-1">关键渲染路径优化 <a class="header-anchor" href="#关键渲染路径优化" aria-label="Permalink to &quot;关键渲染路径优化&quot;">​</a></h3><ul><li>缩小文件的尺寸(Minify)</li><li>使用gzip压缩(Compress)</li><li>使用缓存(Http Cache)</li></ul><h3 id="优化cssom" tabindex="-1">优化CSSOM <a class="header-anchor" href="#优化cssom" aria-label="Permalink to &quot;优化CSSOM&quot;">​</a></h3><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 阻塞渲染 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 非阻塞的加载CSS --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;print.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> media</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;print&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 拆分媒体查询相关CSS资源:可变阻塞加载 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;other.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> media</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;(min-width: 40em)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 设备横屏加载的资源 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;portrait.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> media</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;orientation:protrait&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- loading样式直接内联 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>避免在css中使用<code>@import</code>，会增加关键渲染路径长度，原本是并行的，使用@import会变成串行加载资源</p><h3 id="优化javascript" tabindex="-1">优化Javascript <a class="header-anchor" href="#优化javascript" aria-label="Permalink to &quot;优化Javascript&quot;">​</a></h3><ul><li>异步加载js</li><li>避免同步请求</li><li>延迟解析js</li><li>避免运行时间长的js</li></ul><h4 id="使用defer或者async延迟加载js" tabindex="-1">使用<code>defer</code>或者<code>async</code>延迟加载js <a class="header-anchor" href="#使用defer或者async延迟加载js" aria-label="Permalink to &quot;使用`defer`或者`async`延迟加载js&quot;">​</a></h4><p>把<code>script</code>放到<code>&lt;/body&gt;</code>前面会有个问题，就是如果html和css内容非常大的时候，只有当这些内容加载完了才会下载js，会造成延迟</p><p>使用<code>defer</code>属性，可以让浏览器尽早去请求js脚本，脚本会在DOM解析完毕之后，<code>DOMContentLoaded</code>之前执行，不会阻塞页面</p><ul><li>对于多个<code>defer</code>脚本，后面的<code>defer</code>脚本会等到前一个<code>defer</code>下载完毕之后才会执行</li><li>对于多个<code>async</code>脚本，谁先加载完谁先执行，适用于脚本之间没有互相依赖关系</li></ul><h4 id="使用preload-利用空闲时间预加载指定的资源" tabindex="-1">使用<code>preload</code>，利用空闲时间预加载指定的资源 <a class="header-anchor" href="#使用preload-利用空闲时间预加载指定的资源" aria-label="Permalink to &quot;使用`preload`，利用空闲时间预加载指定的资源&quot;">​</a></h4><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X-UA-Compatible&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IE=edge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Document&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- 利用空闲时间预加载指定的资源，不会阻塞页面的渲染 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index2.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index2.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="使用prefetch-预加载将来可能用到的资源-慎重使用" tabindex="-1">使用<code>prefetch</code>，预加载将来可能用到的资源(慎重使用) <a class="header-anchor" href="#使用prefetch-预加载将来可能用到的资源-慎重使用" aria-label="Permalink to &quot;使用`prefetch`，预加载将来可能用到的资源(慎重使用)&quot;">​</a></h4><p>例如当前路由是/home，可能会去加载/user下的资源，也就是预加载非当前页面的资源，如果<code>prefetch</code>设置的是当前页面的资源，可能会造成重复加载，因此使用的时候一定要注意</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X-UA-Compatible&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IE=edge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Document&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index2.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index2.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="尽量使用css动画-而不是js" tabindex="-1">尽量使用CSS动画，而不是JS <a class="header-anchor" href="#尽量使用css动画-而不是js" aria-label="Permalink to &quot;尽量使用CSS动画，而不是JS&quot;">​</a></h3><p>JS写动画尽量使用<code>requestAnimationFrame</code>而不是<code>setInterval</code></p><h3 id="恰当使用web-worker" tabindex="-1">恰当使用Web Worker <a class="header-anchor" href="#恰当使用web-worker" aria-label="Permalink to &quot;恰当使用Web Worker&quot;">​</a></h3><p>子线程一旦被创建，不会被主线程打断，因此子线程创建完要及时释放，有两种方式关闭</p><ul><li>主线程调用worker.terminate()</li><li>子线程调用自身的全局对象self.close()</li></ul></div></div></main><footer class="VPDocFooter" data-v-8c9e7a14 data-v-f817d067><!--[--><!--]--><div class="edit-info" data-v-f817d067><div class="edit-link" data-v-f817d067><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/sky124380729/sky124380729.github.io/tree/master/packages/levi-docs/docs/columns/perform-optimize/index.md" target="_blank" rel="noreferrer" data-v-f817d067><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-f817d067><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on github<!--]--></a></div><div class="last-updated" data-v-f817d067><p class="VPLastUpdated" data-v-f817d067 data-v-129f8e19>Last updated: <time datetime="2024-02-03T03:21:36.000Z" data-v-129f8e19></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-4a01b9a9 data-v-4a165285><div class="container" data-v-4a165285><p class="message" data-v-4a165285>Released under the MIT License.</p><p class="copyright" data-v-4a165285>Copyright © 2022-present Levi</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"algorithm_data-structure.md\":\"_IzLhZmo\",\"algorithm_heap.md\":\"FPvir9eM\",\"algorithm_index.md\":\"iQq8lhBC\",\"algorithm_recursion.md\":\"Rzxff6tv\",\"framework_react_knowledge.md\":\"RyIksGab\",\"advanced_framework.md\":\"KNNQ6_1K\",\"framework_micro-frontend_single-spa.md\":\"n665SpHN\",\"algorithm_binary-tree.md\":\"CqKxcbhQ\",\"framework_react_code.md\":\"Cas0fPal\",\"mini-code_vue-next-mini_compiler-core.md\":\"oGymWkQ6\",\"framework_react_index.md\":\"9iNxsOOC\",\"framework_micro-frontend_knowledge.md\":\"QLxiRhUR\",\"mini-code_vue-router.md\":\"2BjaUavJ\",\"framework_micro-frontend_module-federation.md\":\"ZBZGVrYY\",\"mini-code_vue-next-mini_runtime-core.md\":\"y8ORWDeI\",\"mini-code_vue-next-mini_runtime-dom.md\":\"JSiF0cLo\",\"bundle_webpack.md\":\"CeQlCKO4\",\"framework_vue_index.md\":\"nhdS_6vo\",\"mini-code_vue-next-mini_reactivity.md\":\"fLreSVym\",\"advanced_design-patterns.md\":\"aqOpjUF7\",\"bundle_rollup.md\":\"5Srgpz9R\",\"algorithm_sort.md\":\"60Wj8ghL\",\"interview_restful.md\":\"zaOjroxY\",\"mini-code_vue-next-mini_compiler-dom.md\":\"izg4QI--\",\"bundle_esbuild.md\":\"0YY8hADh\",\"interview_optimization.md\":\"uEsQ0Zhs\",\"advanced_reg-exp.md\":\"Z_8TC_EX\",\"mini-code_vue2.md\":\"Jq97Kcz0\",\"framework_miniprogram_knowledge.md\":\"BrDttzoo\",\"language_typescript.md\":\"V6_Mss1_\",\"language_javascript.md\":\"5Dye6kvp\",\"algorithm_stack.md\":\"uZKbN_Uu\",\"mini-code_promise.md\":\"savBuIuI\",\"framework_vue_code.md\":\"HyBDeFY1\",\"links_projects.md\":\"uk75XbRT\",\"links_websites.md\":\"VOyn0hWv\",\"links_blogs.md\":\"9s-9A-CB\",\"bundle_vite.md\":\"cMeX-BaG\",\"columns_wujie_index.md\":\"FW1p-pz8\",\"mini-code_vue3.md\":\"TcynBwzK\",\"interview_index.md\":\"l5lB09lt\",\"framework_vue_knowledge.md\":\"5pv5LRox\",\"algorithm_queue.md\":\"UQnkccrZ\",\"columns_perform-optimize_index.md\":\"mzWhw-Gp\",\"qa_index.md\":\"MkV5r1yQ\",\"webpack_index.md\":\"lu5Wm9ag\",\"links_plugins.md\":\"KEaqo4uP\",\"mini-code_micro-frontend.md\":\"A_hRWUAY\",\"algorithm_kmp.md\":\"OyhuC0U4\",\"index.md\":\"S-WY8zjd\",\"advanced_cli_index.md\":\"G1L5UcAS\",\"columns_micro-frontend_index.md\":\"NGaznpsw\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"LEVI NOTEBOOK\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"editLink\":{\"pattern\":\"https://github.com/sky124380729/sky124380729.github.io/tree/master/packages/levi-docs/docs/:path\",\"text\":\"Edit this page on github\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/sky124380729/sky124380729.github.io\"}],\"sidebar\":{\"mini-code/vue-next-mini\":[{\"text\":\"reactivity\",\"link\":\"/mini-code/vue-next-mini/reactivity\"},{\"text\":\"compiler-core\",\"link\":\"/mini-code/vue-next-mini/compiler-core\"},{\"text\":\"compiler-dom\",\"link\":\"/mini-code/vue-next-mini/compiler-dom\"},{\"text\":\"runtime-core\",\"link\":\"/mini-code/vue-next-mini/runtime-core\"},{\"text\":\"runtime-dom\",\"link\":\"/mini-code/vue-next-mini/runtime-dom\"}],\"/framework\":[{\"text\":\"Vue\",\"collapsed\":true,\"items\":[{\"text\":\"Knowledge Points\",\"link\":\"/framework/vue/knowledge\"},{\"text\":\"Source Code\",\"link\":\"/framework/vue/code\"}]},{\"text\":\"React\",\"collapsed\":true,\"items\":[{\"text\":\"Knowledge Points\",\"link\":\"/framework/react/knowledge\"},{\"text\":\"Source Code\",\"link\":\"/framework/react/code\"}]},{\"text\":\"Miniprogram\",\"collapsed\":true,\"items\":[{\"text\":\"Knowledge Points\",\"link\":\"/framework/miniprogram/knowledge\"}]},{\"text\":\"Micro Frontend\",\"collapsed\":true,\"items\":[{\"text\":\"Knowledge Points\",\"link\":\"/framework/micro-frontend/knowledge\"},{\"text\":\"Single SPA\",\"link\":\"/framework/micro-frontend/single-spa\"},{\"text\":\"Module Federation\",\"link\":\"/framework/micro-frontend/module-federation\"}]}],\"/algorithm\":[{\"text\":\"Data Structure\",\"collapsed\":true,\"items\":[{\"text\":\"Stack\",\"link\":\"/algorithm/stack\"},{\"text\":\"Queue\",\"link\":\"/algorithm/queue\"},{\"text\":\"Heap\",\"link\":\"/algorithm/heap\"},{\"text\":\"Binary Tree\",\"link\":\"/algorithm/binary-tree\"}]},{\"text\":\"Algorithm\",\"collapsed\":true,\"items\":[{\"text\":\"Sort\",\"link\":\"/algorithm/sort\"},{\"text\":\"Recursion\",\"link\":\"/algorithm/recursion\"},{\"text\":\"KMP\",\"link\":\"/algorithm/kmp\"}]}],\"/interview\":[{\"text\":\"Knowledge\",\"collapsed\":true,\"items\":[{\"text\":\"Restful\",\"link\":\"/interview/restful\"},{\"text\":\"Optimization\",\"link\":\"/interview/optimization\"}]}]},\"nav\":[{\"text\":\"Language\",\"items\":[{\"text\":\"Javascript\",\"link\":\"/language/javascript\"},{\"text\":\"Typescript\",\"link\":\"/language/typescript\"}]},{\"text\":\"Framework\",\"items\":[{\"text\":\"Vue\",\"link\":\"/framework/vue/knowledge\"},{\"text\":\"React\",\"link\":\"/framework/react/knowledge\"},{\"text\":\"Miniprogram\",\"link\":\"/framework/miniprogram/knowledge\"},{\"text\":\"Micro-Frontend\",\"link\":\"/framework/micro-frontend/knowledge\"}]},{\"text\":\"Bundle\",\"items\":[{\"text\":\"Webpack\",\"link\":\"/bundle/webpack\"},{\"text\":\"Vite\",\"link\":\"/bundle/vite\"},{\"text\":\"Rollup\",\"link\":\"/bundle/rollup\"},{\"text\":\"Esbuild\",\"link\":\"/bundle/esbuild\"}]},{\"text\":\"Algorithm\",\"link\":\"/algorithm/index\",\"activeMatch\":\"/algorithm/\"},{\"text\":\"Mini Code\",\"items\":[{\"text\":\"Vue2\",\"link\":\"/mini-code/vue2\"},{\"text\":\"Vue3\",\"link\":\"/mini-code/vue3\"},{\"text\":\"vue-next-mini\",\"link\":\"/mini-code/vue-next-mini/reactivity\"},{\"text\":\"Vue-Router\",\"link\":\"/mini-code/vue-router\"},{\"text\":\"Promise\",\"link\":\"/mini-code/promise\"},{\"text\":\"Micro-Frontend\",\"link\":\"/mini-code/micro-frontend\"}]},{\"text\":\"Advanced\",\"items\":[{\"text\":\"Framework\",\"link\":\"/advanced/framework\"},{\"text\":\"CLI\",\"link\":\"/advanced/cli/index\"},{\"text\":\"Design Patterns\",\"link\":\"/advanced/design-patterns\"},{\"text\":\"Reg-Exp\",\"link\":\"/advanced/reg-exp\"}]},{\"text\":\"Links\",\"items\":[{\"text\":\"Projects\",\"link\":\"/links/projects\"},{\"text\":\"Plugins\",\"link\":\"/links/plugins\"},{\"text\":\"Websites\",\"link\":\"/links/websites\"},{\"text\":\"Blogs\",\"link\":\"/links/blogs\"}]},{\"text\":\"Interview \",\"link\":\"/interview/index\",\"activeMatch\":\"/interview/\"},{\"text\":\"Q&A\",\"link\":\"/qa/index\",\"activeMatch\":\"/qa/\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2022-present Levi\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>